<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Merry Christmas</title>
<style>
    body {
        margin: 0;
        height: 100vh;
        background: linear-gradient(#14532d, #318a54);
        overflow: hidden;
        font-family: 'Segoe UI', sans-serif;
    }

    /* ===== TITLE ===== */
    .text-center {
        position: fixed;
    inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;

    text-align: center;
    font-size: 60px;
    animation: float 3s ease-in-out infinite;

    z-index: 2;
    }
    .text-center a {
        font-family: 'Baloo 2', cursive;
        font-weight: 700;
        color: #f8dddf;
        text-decoration: none;
        text-shadow:
            0 0 8px rgba(255, 255, 255, 0.7),
            0 0 16px rgba(179, 164, 165, 0.4);
        transition: 0.2s;
}

.text-center a:hover {
    color: #D4AF37; /* v√†ng kim */
    text-shadow:
        0 0 12px #FFD700,
        0 0 30px #FFD700;
}
h2 {
    align-items: center;
    justify-content: center;
    font-size: 40px;
    font-family: 'Baloo 2', cursive;
    color:#165c32;
}


    @keyframes float {
        0%,100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
    }

    /* ===== SNOW ===== */
.snow {
    position: absolute;
    top: -10px;
    background: white;
    border-radius: 50%;
    opacity: 0.8;
    animation: fall linear forwards;
}
#snow-layer {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 1; /* SAU card */
    overflow: hidden;
}

.overlay {
    z-index: 2;
}

.book {
    z-index: 3;
}



@keyframes fall {
    to {
        transform: translateY(110vh);
    }
}

    /* ===== OVERLAY ===== */
    .overlay {
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.7);
        display: none;
        align-items: center;
        justify-content: center;
        perspective: 1200px;
    }

    /* ===== BOOK CARD ===== */
    .book {
        width: 610px;
        height: 580px;
        position: relative;
        transform-style: preserve-3d;
    }

    .page {
        position: absolute;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #fff, #F5EFE6);
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.4);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 30px;
        text-align: center;
    }

    .page.front {
    transform-origin: left;
    background: linear-gradient(135deg, #C1121F, #8B0000);
    color: white;
}
.page.front::before {
    content: "";
    position: absolute;
    inset: -2px;
    border-radius: 22px;
    background: linear-gradient(45deg, #FFD700, #fff3b0, #FFD700);
    opacity: 0.6;
    filter: blur(8px);
    z-index: -1;
    animation: glow 2.5s ease-in-out infinite;
}

@keyframes glow {
    0%,100% { opacity: 0.4; }
    50% { opacity: 0.8; }
}

/* CH·ªà ch·∫°y khi c√≥ class open */
.book.open .front {
    animation: openBook 1.2s forwards;
}

    .page.back {
        transform: rotateY(180deg);
    }


    h2 {
        margin-bottom: 20px;
    }

    .close {
    position: absolute;
    top: 16px;
    left: 16px;

    padding: 6px 12px;
    border-radius: 50%;
    border: none;

    background: rgba(240, 238, 238, 0.5);
    color: #1F7A1F;
    cursor: pointer;

    font-size: 25px;
    width: 36px;
    height: 36px;

    display: flex;
    align-items: center;
    justify-content: center;

    transition: 0.3s;
}


    .close:hover {
        background: #14532d;
    }
    #treeCanvas {
    position: fixed;
    inset: 0;
    z-index: 0; /* sau ch·ªØ */
    pointer-events: none;
}
.volume-hint{
    margin-top: 12px;
    font-size: 18px;
    font-family: 'Baloo 2', cursive;
    color: rgba(255, 255, 255, 0.85);
    text-shadow: 0 0 6px rgba(255,255,255,0.6);
    animation: fadeIn 2s ease-in-out infinite alternate;
}
p {
    font-size: 18px;
}
/* üì± MOBILE NH·ªé (iPhone, Android) */
@media (max-width: 480px) {

.text-center {
    font-size: 44px; /* TO R√ï H∆†N */
    padding: 0 20px;
    line-height: 1.2;
}

.volume-hint {
    font-size: 16px;
    margin-top: 10px;
}
}
</style>
</head>

<body>
    <canvas id="treeCanvas"></canvas>
    <div id="snow-layer"> 
    </div>
<h1 class="text-center">
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@600;700&display=swap" rel="stylesheet">
    <a href="#" onclick="openCard()">Nh·∫•n v√†o ƒë√¢y ƒëiiiüéÑ</a>
    <div class="volume-hint">
        üéßüîä Gi·ªØ √¢m l∆∞·ª£ng v·ª´a ƒë·ªß ƒë·ªÉ nghe nh·∫°c nha ‚ùÑÔ∏è‚ú®
    </div>
</h1>
<!-- OVERLAY -->
<div class="overlay" id="overlay">
    <div class="book" onclick=""event.stopPropagation()>
        
        <div class="page front">
            <button class="close" onclick="closeCard()">x</button>
            <h2>üéÑ‚ùÑÔ∏è Merry Christmas ‚ú®</h2>
            <p>
                Ch√∫c b·∫°n m·ªôt m√πa Noel th·∫≠t ·∫•m √°p,
                nhi·ªÅu ni·ªÅm vui nh·ªè xinh v√† th·∫≠t nhi·ªÅu ti·∫øng c∆∞·ªùi üéÅüíñ
            </p>
        </div>
        

    </div>
</div>

<!-- AUDIO -->
<audio id="music" loop>
    <source src="/noel.mp3" type="audio/mpeg">
    
</audio>

<audio id="bell">
    <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_8a7c70c58b.mp3" type="audio/mpeg">
</audio>

<script>
const music = document.getElementById("music");
music.volume = 0.3;

    /* ===== SNOW ===== */
const snowLayer = document.getElementById("snow-layer");

function createSnow() {
    const snow = document.createElement("div");
    snow.className = "snow";

    const size = Math.random() * 4 + 2; // 2‚Äì6px
    snow.style.width = size + "px";
    snow.style.height = size + "px";

    snow.style.left = Math.random() * 100 + "vw";
    snow.style.animationDuration = 3 + Math.random() * 4 + "s";
    snow.style.opacity = Math.random() * 0.6 + 0.4;

    /* ‚ú® TUY·∫æT L·∫§P L√ÅNH (ch·ªâ 1 ph·∫ßn) */
    if (Math.random() < 0.2) {
        snow.style.boxShadow = "0 0 6px rgba(255,255,255,0.9)";
    }

    snowLayer.appendChild(snow);

    setTimeout(() => {
        snow.remove();
    }, 12000);
}

/* ‚ùÑÔ∏è TUY·∫æT R∆†I D√ÄY */
setInterval(createSnow, 40);

    /* ===== CARD ===== */
    function openCard() {
    const overlay = document.getElementById("overlay");
    const book = document.querySelector(".book");

    overlay.style.display = "flex";

    // reset animation
    book.classList.remove("open");
    void book.offsetWidth; // force reflow
    book.classList.add("open");

    document.getElementById("music").play();
    document.getElementById("bell").play();
}

function closeCard() {
    const overlay = document.getElementById("overlay");
    const book = document.querySelector(".book");

    overlay.style.display = "none";
    book.classList.remove("open");

    document.getElementById("music").pause();
}
/* ===== UPGRADED STAR CHRISTMAS TREE ===== */
const canvas = document.getElementById("treeCanvas");
const ctx = canvas.getContext("2d");

function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener("resize", resizeCanvas);

let time = 0;

/* ‚≠ê V·∫º SAO 5 C√ÅNH */
function drawStar(x, y, r, glow) {
    ctx.save();
    ctx.translate(x, y);
    ctx.beginPath();

    for (let i = 0; i < 10; i++) {
        const angle = i * Math.PI / 5;
        const radius = i % 2 === 0 ? r : r / 2;
        ctx.lineTo(
            Math.cos(angle) * radius,
            Math.sin(angle) * radius
        );
    }

    ctx.closePath();
    ctx.fillStyle = "#FFD700";
    ctx.shadowColor = "#FFD700";
    ctx.shadowBlur = glow;
    ctx.fill();
    ctx.restore();
}

function drawTree() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    const cx = canvas.width / 2;
    const base = isMobile 
    ? canvas.height * 0.78
    : canvas.height * 0.85;

    const height = isMobile 
    ? canvas.height * 0.45  // mobile: NG·∫ÆN L·∫†I
    : canvas.height * 0.6;  // desktop gi·ªØ nguy√™n

    const layers = 220; // c√†ng l·ªõn c√†ng m·ªãn

    for (let i = 0; i < layers; i++) {
        const p = i / layers;        // 0 ‚Üí 1
        const y = baseY - p * height;

        // b√°n k√≠nh t·∫°o h√¨nh c√¢y
        const radius = (1 - p) * 220;

        // xo·∫Øn ·ªëc
        const angle = p * Math.PI * 8 + time;

        const x = cx + Math.cos(angle) * radius;

        // k√≠ch th∆∞·ªõc sao
        const size = 2 + (1 - p) * 3;

        drawStar(x, y, size, 12);

        // ‚ú® b·ª•i sao nh·ªè xung quanh
        if (Math.random() < 0.25) {
            ctx.beginPath();
            ctx.arc(
                x + (Math.random() - 0.5) * 15,
                y + (Math.random() - 0.5) * 15,
                1,
                0,
                Math.PI * 2
            );
            ctx.fillStyle = "rgba(255,215,0,0.8)";
            ctx.fill();
        }
    }

    /* üåü SAO ƒê·ªàNH C√ÇY */
    drawStar(cx, baseY - height - 15, 10, 30);
    
    /* üåü SAO CH√ÇN C√ÇY */
    ctx.beginPath();
    ctx.arc(cx, baseY + 10, 6, 0, Math.PI * 2);
    ctx.fillStyle = "#FFD700";
    ctx.shadowBlur = 40;
    ctx.fill();

    time += 0.01;
    requestAnimationFrame(drawTree);
}
/*ƒë√®n*/
function drawLight(x, y, size, alpha) {
    ctx.beginPath();
    ctx.arc(x, y, size, 0, Math.PI * 2);
    ctx.fillStyle = `rgba(255, 215, 100, ${alpha})`;
    ctx.shadowColor = "#FFD700";
    ctx.shadowBlur = 10;
    ctx.fill();
    /* üéÑ ƒê√àN NOEL NH·ªé */
if (i % 8 === 0) { // kho·∫£ng c√°ch gi·ªØa ƒë√®n
    const blink = 0.5 + 0.5 * Math.sin(time * 3 + i);
    drawLight(x, y, 2.5, blink);
}
}


drawTree();
</script>

</body>
</html>
